<!DOCTYPE mapper   
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"   
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="AccessToken">
	<!-- resutlMap : to get List result -->
	<resultMap id="accessTokenResult" type="com.icontrols.test.domain.AccessToken">
		<result property="uId" column="uId" javaType="java.lang.String" />
		<result property="access_token" column="accessToken" javaType="java.lang.String" />
		<result property="token_type" column="tokenType" javaType="java.lang.String" />
		<result property="expires_in" column="expiresIn" javaType="java.lang.String" />
		<result property="refresh_token" column="refreshToken" javaType="java.lang.String" />
	</resultMap>

	<insert id="insertAccessToken" parameterType="HashMap">
		INSERT INTO
		ARTIK_ACCESS_TOKEN (uId, accessToken,
		tokenType,expiresIn,refreshToken,issuedTime)
		VALUES
		(#{uId}, #{accessToken},
		#{tokenType},#{expiresIn}, #{refreshToken}, #{issuedTime});
	</insert>

	<select id="tokenCheck" parameterType="HashMap" resultType="Integer">
		SELECT count(*)
		FROM ARTIK_ACCESS_TOKEN
		WHERE uId LIKE #{uId}
	</select>

	<update id="updateAccessToken" parameterType="HashMap">
		UPDATE
		ARTIK_ACCESS_TOKEN
		SET accessToken= #{accessToken}, tokenType =
		#{tokenType}, expiresIn = #{expiresIn}, refreshToken = #{refreshToken}, issuedTime = #{issuedTime}
		WHERE uId LIKE #{uId};
	</update>

	<select id="getAccessTokenById" parameterType="HashMap"
		resultType="String">
		SELECT accessToken
		FROM ARTIK_ACCESS_TOKEN
		AND uId LIKE
		#{uId}
	</select>

	<select id="getAllAccessToken" resultMap="accessTokenResult">
		SELECT *
		FROM ARTIK_ACCESS_TOKEN
	</select>

</mapper>